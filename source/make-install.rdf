#!/usr/bin/perl

my $machine = `gcc -dumpmachine`;
chomp $machine;

$machine =~ /^(.*?)\-/
	or die "Unable to parse machine name";
my $arch = $1;

my $version = `$ENV{'REAL_CONFIG'} --version`
	or die "Unable to determine target version";
chomp $version;
$version =~ s/^(\d+)\.(\d+)\..*/$1.$2/;
my $minVersion = $version;
my $maxVersion = $version;

open(IN, "<install.rdf.in")
	or die $!;
open(OUT, ">install.rdf")
	or die $!;
while(<IN>)
{
	s/%minVersion%/$minVersion/g;
	s/%maxVersion%/$minVersion/g;
	print(OUT)
		or die $!;
}
close(IN);
close(OUT);
